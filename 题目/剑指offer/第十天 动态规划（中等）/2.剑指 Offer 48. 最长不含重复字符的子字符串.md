## 剑指 Offer 48. 最长不含重复字符的子字符串

请从字符串中找出一个最长的不包含重复字符的子字符串，计算该最长子字符串的长度。

```
示例 1:

输入: "abcabcbb"
输出: 3
解释: 因为无重复字符的最长子串是 "abc"，所以其长度为 3。
```

```
示例 2:

输入: "bbbbb"
输出: 1
解释: 因为无重复字符的最长子串是 "b"，所以其长度为 1。
```

```
示例 3:

输入: "pwwkew"
输出: 3
解释: 因为无重复字符的最长子串是 "wke"，所以其长度为 3。
     请注意，你的答案必须是 子串 的长度，"pwke" 是一个子序列，不是子串。
```

限制：

s.length <= 40000

### 解答

假设我们选择字符串中的第 `k` 个字符作为起始位置，并且得到了不包含重复字符的最长子串的结束位置为 `r`，那么当我们选择第 `k+1` 个字符作为起始位置时，
首先从 `k+1` 到 `r` 的字符显然是不重复的。并且由于少了原本的第 `k` 个字符，我们可以尝试继续增大 `r`，直到右侧出现了重复字符为止。

这样，我们可以使用「滑动窗口」来解决这个问题了：使用两个指针表示字符串中的某个子串（或窗口）的左右边界，其中左指针代表着「枚举子串的起始位置」，而右指针则为 r。

在每一步的操作中，我们会将左指针向右移动一格，表示 我们开始枚举下一个字符作为起始位置，然后我们可以不断地向右移动右指针，但需要保证这两个指针对应的子串中没有重复的字符。在移动结束后，这个子串就对应着 以左指针开始的，不包含重复字符的最长子串。我们记录下这个子串的长度；

在枚举结束后，我们找到的最长的子串的长度即为答案。

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var lengthOfLongestSubstring = function (s) {
  // 滑动窗口解决
  let r = 0; // 左右两个指针，左指针顺序执行，右指针循环判断，如果不相等则右移
  const len = s.length;
  const occ = new Set();

  let ans = 0;
  for (let i = 0; i < len; i++) {
    // 第2位开始，每次都删掉之前的，重新开始判断
    if (i !== 0) {
      occ.delete(s.charAt(i - 1));
    }

    // 未到终点，且集合中不存在和当前字符相等的
    while (r < len && !occ.has(s.charAt(r))) {
      occ.add(s.charAt(r));
      ++r;
    }
    // 判断下哪个大
    ans = Math.max(ans, r - i);
  }
  return ans;
};
```
